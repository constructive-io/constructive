/**
 * User model for ORM client
 * @generated by @constructive-io/graphql-codegen
 * DO NOT EDIT - changes will be overwritten
 */
import { OrmClient } from '../client';
import {
  QueryBuilder,
  buildFindManyDocument,
  buildFindFirstDocument,
  buildFindOneDocument,
  buildCreateDocument,
  buildUpdateByPkDocument,
  buildDeleteByPkDocument,
} from '../query-builder';
import type {
  ConnectionResult,
  FindManyArgs,
  FindFirstArgs,
  CreateArgs,
  UpdateArgs,
  DeleteArgs,
  InferSelectResult,
  StrictSelect,
} from '../select-types';
import type {
  User,
  UserWithRelations,
  UserSelect,
  UserFilter,
  UsersOrderBy,
  CreateUserInput,
  UpdateUserInput,
  UserPatch,
} from '../input-types';
import { connectionFieldsMap } from '../input-types';
export class UserModel {
  constructor(private client: OrmClient) {}
  findMany<S extends UserSelect>(
    args: FindManyArgs<S, UserFilter, UsersOrderBy> & {
      select: S;
    } & StrictSelect<S, UserSelect>
  ): QueryBuilder<{
    users: ConnectionResult<InferSelectResult<UserWithRelations, S>>;
  }> {
    const { document, variables } = buildFindManyDocument(
      'User',
      'users',
      args.select,
      {
        where: args?.where,
        orderBy: args?.orderBy as string[] | undefined,
        first: args?.first,
        last: args?.last,
        after: args?.after,
        before: args?.before,
        offset: args?.offset,
      },
      'UserFilter',
      'UsersOrderBy',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'query',
      operationName: 'User',
      fieldName: 'users',
      document,
      variables,
    });
  }
  findFirst<S extends UserSelect>(
    args: FindFirstArgs<S, UserFilter> & {
      select: S;
    } & StrictSelect<S, UserSelect>
  ): QueryBuilder<{
    users: {
      nodes: InferSelectResult<UserWithRelations, S>[];
    };
  }> {
    const { document, variables } = buildFindFirstDocument(
      'User',
      'users',
      args.select,
      {
        where: args?.where,
      },
      'UserFilter',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'query',
      operationName: 'User',
      fieldName: 'users',
      document,
      variables,
    });
  }
  findOne<S extends UserSelect>(
    args: {
      id: string;
      select: S;
    } & StrictSelect<S, UserSelect>
  ): QueryBuilder<{
    user: InferSelectResult<UserWithRelations, S> | null;
  }> {
    const { document, variables } = buildFindManyDocument(
      'User',
      'users',
      args.select,
      {
        where: {
          id: {
            equalTo: args.id,
          },
        },
        first: 1,
      },
      'UserFilter',
      'UsersOrderBy',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'query',
      operationName: 'User',
      fieldName: 'user',
      document,
      variables,
      transform: (data: {
        users?: {
          nodes?: InferSelectResult<UserWithRelations, S>[];
        };
      }) => ({
        user: data.users?.nodes?.[0] ?? null,
      }),
    });
  }
  create<S extends UserSelect>(
    args: CreateArgs<S, CreateUserInput['user']> & {
      select: S;
    } & StrictSelect<S, UserSelect>
  ): QueryBuilder<{
    createUser: {
      user: InferSelectResult<UserWithRelations, S>;
    };
  }> {
    const { document, variables } = buildCreateDocument(
      'User',
      'createUser',
      'user',
      args.select,
      args.data,
      'CreateUserInput',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'mutation',
      operationName: 'User',
      fieldName: 'createUser',
      document,
      variables,
    });
  }
  update<S extends UserSelect>(
    args: UpdateArgs<
      S,
      {
        id: string;
      },
      UserPatch
    > & {
      select: S;
    } & StrictSelect<S, UserSelect>
  ): QueryBuilder<{
    updateUser: {
      user: InferSelectResult<UserWithRelations, S>;
    };
  }> {
    const { document, variables } = buildUpdateByPkDocument(
      'User',
      'updateUser',
      'user',
      args.select,
      args.where.id,
      args.data,
      'UpdateUserInput',
      'id',
      'patch',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'mutation',
      operationName: 'User',
      fieldName: 'updateUser',
      document,
      variables,
    });
  }
  delete<S extends UserSelect>(
    args: DeleteArgs<
      {
        id: string;
      },
      S
    > & {
      select: S;
    } & StrictSelect<S, UserSelect>
  ): QueryBuilder<{
    deleteUser: {
      user: InferSelectResult<UserWithRelations, S>;
    };
  }> {
    const { document, variables } = buildDeleteByPkDocument(
      'User',
      'deleteUser',
      'user',
      args.where.id,
      'DeleteUserInput',
      'id',
      args.select,
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'mutation',
      operationName: 'User',
      fieldName: 'deleteUser',
      document,
      variables,
    });
  }
}
