/**
 * Post model for ORM client
 * @generated by @constructive-io/graphql-codegen
 * DO NOT EDIT - changes will be overwritten
 */
import { OrmClient } from '../client';
import {
  QueryBuilder,
  buildFindManyDocument,
  buildFindFirstDocument,
  buildFindOneDocument,
  buildCreateDocument,
  buildUpdateByPkDocument,
  buildDeleteByPkDocument,
} from '../query-builder';
import type {
  ConnectionResult,
  FindManyArgs,
  FindFirstArgs,
  CreateArgs,
  UpdateArgs,
  DeleteArgs,
  InferSelectResult,
  StrictSelect,
} from '../select-types';
import type {
  Post,
  PostWithRelations,
  PostSelect,
  PostFilter,
  PostsOrderBy,
  CreatePostInput,
  UpdatePostInput,
  PostPatch,
} from '../input-types';
import { connectionFieldsMap } from '../input-types';
export class PostModel {
  constructor(private client: OrmClient) {}
  findMany<S extends PostSelect>(
    args: FindManyArgs<S, PostFilter, PostsOrderBy> & {
      select: S;
    } & StrictSelect<S, PostSelect>
  ): QueryBuilder<{
    posts: ConnectionResult<InferSelectResult<PostWithRelations, S>>;
  }> {
    const { document, variables } = buildFindManyDocument(
      'Post',
      'posts',
      args.select,
      {
        where: args?.where,
        orderBy: args?.orderBy as string[] | undefined,
        first: args?.first,
        last: args?.last,
        after: args?.after,
        before: args?.before,
        offset: args?.offset,
      },
      'PostFilter',
      'PostsOrderBy',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'query',
      operationName: 'Post',
      fieldName: 'posts',
      document,
      variables,
    });
  }
  findFirst<S extends PostSelect>(
    args: FindFirstArgs<S, PostFilter> & {
      select: S;
    } & StrictSelect<S, PostSelect>
  ): QueryBuilder<{
    posts: {
      nodes: InferSelectResult<PostWithRelations, S>[];
    };
  }> {
    const { document, variables } = buildFindFirstDocument(
      'Post',
      'posts',
      args.select,
      {
        where: args?.where,
      },
      'PostFilter',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'query',
      operationName: 'Post',
      fieldName: 'posts',
      document,
      variables,
    });
  }
  findOne<S extends PostSelect>(
    args: {
      id: string;
      select: S;
    } & StrictSelect<S, PostSelect>
  ): QueryBuilder<{
    post: InferSelectResult<PostWithRelations, S> | null;
  }> {
    const { document, variables } = buildFindManyDocument(
      'Post',
      'posts',
      args.select,
      {
        where: {
          id: {
            equalTo: args.id,
          },
        },
        first: 1,
      },
      'PostFilter',
      'PostsOrderBy',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'query',
      operationName: 'Post',
      fieldName: 'post',
      document,
      variables,
      transform: (data: {
        posts?: {
          nodes?: InferSelectResult<PostWithRelations, S>[];
        };
      }) => ({
        post: data.posts?.nodes?.[0] ?? null,
      }),
    });
  }
  create<S extends PostSelect>(
    args: CreateArgs<S, CreatePostInput['post']> & {
      select: S;
    } & StrictSelect<S, PostSelect>
  ): QueryBuilder<{
    createPost: {
      post: InferSelectResult<PostWithRelations, S>;
    };
  }> {
    const { document, variables } = buildCreateDocument(
      'Post',
      'createPost',
      'post',
      args.select,
      args.data,
      'CreatePostInput',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'mutation',
      operationName: 'Post',
      fieldName: 'createPost',
      document,
      variables,
    });
  }
  update<S extends PostSelect>(
    args: UpdateArgs<
      S,
      {
        id: string;
      },
      PostPatch
    > & {
      select: S;
    } & StrictSelect<S, PostSelect>
  ): QueryBuilder<{
    updatePost: {
      post: InferSelectResult<PostWithRelations, S>;
    };
  }> {
    const { document, variables } = buildUpdateByPkDocument(
      'Post',
      'updatePost',
      'post',
      args.select,
      args.where.id,
      args.data,
      'UpdatePostInput',
      'id',
      'patch',
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'mutation',
      operationName: 'Post',
      fieldName: 'updatePost',
      document,
      variables,
    });
  }
  delete<S extends PostSelect>(
    args: DeleteArgs<
      {
        id: string;
      },
      S
    > & {
      select: S;
    } & StrictSelect<S, PostSelect>
  ): QueryBuilder<{
    deletePost: {
      post: InferSelectResult<PostWithRelations, S>;
    };
  }> {
    const { document, variables } = buildDeleteByPkDocument(
      'Post',
      'deletePost',
      'post',
      args.where.id,
      'DeletePostInput',
      'id',
      args.select,
      connectionFieldsMap
    );
    return new QueryBuilder({
      client: this.client,
      operation: 'mutation',
      operationName: 'Post',
      fieldName: 'deletePost',
      document,
      variables,
    });
  }
}
