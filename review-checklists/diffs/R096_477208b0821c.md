# Diff — `R096` `packages/core/__tests__/core/add-functionality.test.ts` → `pgpm/core/__tests__/core/add-functionality.test.ts`

## Navigation
- Prev: [R096_0f47d0214543.md](R096_0f47d0214543.md) | Up: [packages/core.md](../packages/core.md) | Index: [README.md](../README.md) | Diffs: [diffs/README.md](README.md) | Snapshots: [SNAPSHOTS.md](../SNAPSHOTS.md) | Next: [R084_4bfc794ddeff.md](R084_4bfc794ddeff.md)

## Context
- Diff base (merge base for `main...HEAD`): `86d74dc4fce9051df0d2b5bcc163607aba42f009`
- Main tip: `2492d840ab18e5c30cc7a24a7b4959abf5d6b21e`
- Head: `refactor/ensure-new-name-mappings` @ `27ba20cfc1e66cb921f229963ca63a201fcf6952`
- Module: `packages/core`
- Type: rename/copy (similarity `96`)
- Numstat: `+11/-9`
- Reproduce: `git diff -M main...HEAD -- packages/core/__tests__/core/add-functionality.test.ts pgpm/core/__tests__/core/add-functionality.test.ts`

## Summary
- Larger change (not cleanly line-aligned)
- Token deltas: `launchql`: 1 → 0

## Key replacements
- ``    writeFileSync(join(moduleDir, `${moduleName}.control`), controlContent);``
  - `, 'launchql.` → ``, `${moduleName}.``
  - `'),` → ```),``
- `import { basename, join } from 'path';`
  - `` → `basename,`
- `%uri=https://github.com/test/${moduleName}`
  - `/test-module` → `/${moduleName}`
- ```;``
  - ``}`;`` → ```;``

## Key additions
- `    const moduleName = basename(moduleDir);`
- `%project=${moduleName}`
- ``    const controlContent = `# ${moduleName} extension``
- `comment = 'Test module'`
- `default_version = '0.1.0'`
- `relocatable = false`
- `superuser = false`

## Key removals
- `%project=test-module`
- ``    const controlContent = `{``
- `  "name": "test-module",`
- `  "version": "0.1.0",`
- `  "description": "Test module"`

## Full diff (side-by-side, changed lines only)
<details>
<summary>Show</summary>

- Left = diff base, Right = `HEAD`
- Legend: `|` changed, `<` only in base, `>` only in `HEAD`

```text
import { join } from 'path';											      |	import { basename, join } from 'path';
														      >	    const moduleName = basename(moduleDir);
%project=test-module												      |	%project=${moduleName}
%uri=https://github.com/test/test-module									      |	%uri=https://github.com/test/${moduleName}
    const controlContent = `{											      |	    const controlContent = `# ${moduleName} extension
  "name": "test-module",											      |	comment = 'Test module'
  "version": "0.1.0",												      |	default_version = '0.1.0'
  "description": "Test module"											      |	relocatable = false
}`;														      |	superuser = false
    writeFileSync(join(moduleDir, 'launchql.control'), controlContent);						      |	`;
														      >	    writeFileSync(join(moduleDir, `${moduleName}.control`), controlContent);
```

</details>

## Navigation
- Prev: [R096_0f47d0214543.md](R096_0f47d0214543.md) | Up: [packages/core.md](../packages/core.md) | Index: [README.md](../README.md) | Diffs: [diffs/README.md](README.md) | Snapshots: [SNAPSHOTS.md](../SNAPSHOTS.md) | Next: [R084_4bfc794ddeff.md](R084_4bfc794ddeff.md)
