# Diff — `R085` `packages/server/src/middleware/graphile.ts` → `graphql/server/src/middleware/graphile.ts`

## Navigation
- Prev: [R090_b156014c75c2.md](R090_b156014c75c2.md) | Up: [packages/server.md](../packages/server.md) | Index: [README.md](../README.md) | Diffs: [diffs/README.md](README.md) | Snapshots: [SNAPSHOTS.md](../SNAPSHOTS.md) | Next: [R092_6d1f63de3a07.md](R092_6d1f63de3a07.md)

## Context
- Diff base (merge base for `main...HEAD`): `86d74dc4fce9051df0d2b5bcc163607aba42f009`
- Main tip: `2492d840ab18e5c30cc7a24a7b4959abf5d6b21e`
- Head: `refactor/ensure-new-name-mappings` @ `27ba20cfc1e66cb921f229963ca63a201fcf6952`
- Module: `packages/server`
- Type: rename/copy (similarity `85`)
- Numstat: `+10/-10`
- Reproduce: `git diff -M main...HEAD -- packages/server/src/middleware/graphile.ts graphql/server/src/middleware/graphile.ts`

## Changes (line-aligned)
- `import { ConstructiveOptions } from '@constructive-io/graphql-types';`
  - `LaunchQLOptions` → `ConstructiveOptions`
  - `launchql` → `constructive-io`
  - `` → `graphql-`
- `export const graphile = (opts: ConstructiveOptions): RequestHandler => {`
  - `lOpts` → `opts`
  - `LaunchQLOptions` → `ConstructiveOptions`
- `        ...opts,`
  - `lOpts` → `opts`
- `          ...opts.graphile,`
  - `lOpts` → `opts`
- `      options.appendPlugins.push(...opts.graphile.appendPlugins);`
  - `lOpts` → `opts`
- `        ...opts.graphile.graphileBuildOptions,`
  - `lOpts` → `opts`
- `      const graphileOpts: PostGraphileOptions = {`
  - `opts` → `graphileOpts`
- `        ...opts.graphile.overrideSettings,`
  - `lOpts` → `opts`
- `        ...opts.pg,`
  - `lOpts` → `opts`
- `      const handler = postgraphile(pgPool, schema, graphileOpts);`
  - `opts` → `graphileOpts`

## Full diff (side-by-side, changed lines only)
<details>
<summary>Show</summary>

- Left = diff base, Right = `HEAD`
- Legend: `|` changed, `<` only in base, `>` only in `HEAD`

```text
import { LaunchQLOptions } from '@launchql/types';								      |	import { ConstructiveOptions } from '@constructive-io/graphql-types';
export const graphile = (lOpts: LaunchQLOptions): RequestHandler => {						      |	export const graphile = (opts: ConstructiveOptions): RequestHandler => {
        ...lOpts,												      |	        ...opts,
          ...lOpts.graphile,											      |	          ...opts.graphile,
      options.appendPlugins.push(...lOpts.graphile.appendPlugins);						      |	      options.appendPlugins.push(...opts.graphile.appendPlugins);
        ...lOpts.graphile.graphileBuildOptions,									      |	        ...opts.graphile.graphileBuildOptions,
      const opts: PostGraphileOptions = {									      |	      const graphileOpts: PostGraphileOptions = {
        ...lOpts.graphile.overrideSettings,									      |	        ...opts.graphile.overrideSettings,
        ...lOpts.pg,												      |	        ...opts.pg,
      const handler = postgraphile(pgPool, schema, opts);							      |	      const handler = postgraphile(pgPool, schema, graphileOpts);
```

</details>

## Navigation
- Prev: [R090_b156014c75c2.md](R090_b156014c75c2.md) | Up: [packages/server.md](../packages/server.md) | Index: [README.md](../README.md) | Diffs: [diffs/README.md](README.md) | Snapshots: [SNAPSHOTS.md](../SNAPSHOTS.md) | Next: [R092_6d1f63de3a07.md](R092_6d1f63de3a07.md)
